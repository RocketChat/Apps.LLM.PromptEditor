import{_ as k}from"./link.vue.7e87621e.js";import{_ as I}from"./input.vue.0d9c8040.js";import{a as A,W as K,h as b,a2 as w,r as P,k as V,a3 as D,G as B,b as c,j as i,m as d,e as _,w as C,u as s,A as E,t as f,l as N,o as u}from"./entry.3cc83cf9.js";import{u as T,h as G}from"./language-model.c5e8ba07.js";import{s as L}from"./local-storage-ref.b5ec8d15.js";import"./index.browser.7e542916.js";const O={"text-gray-6":"","dark:text-gray-2":"","text-11px":"","sm:text-4":""},S=i("div",null," To use the application you need to provide an OpenAI API key. ",-1),R={"mt-3":""},$={key:0,"text-gray-5":"","dark:text-gray-1":"","mt-3":""},j={key:1},F=i("div",{"font-bold":"","text-gray-6":"","dark:text-gray-3":"","mt-7":"","text-14px":"","sm:text-5":""}," Instance API Key ",-1),M=i("div",{"my-3":""},null,-1),U={key:0,"text-color-lighter":"","text-8px":"","sm:text-13px":""},W={"text-color":"","mt-3":"","font-code":"","p-1":"","sm:px-3":"","sm:py-2":"",rounded:"","text-6px":"","sm:text-3":"","break-all":"",class:"bg-gray-1 dark:bg-gray-1/5 ring-1 ring-gray-2 dark:ring-white/10"},Z=A({__name:"api-key",setup(Y){const{apiKey:p,instanceApiKey:o}=K(),{isDetaEnabled:l}=b(),{checkIfAPIKeyIsValid:y}=T(),t=L(p),x=w(),r=P(!1),h=V(()=>{if(!o.value)return"";const a=o.value.length;return o.value.slice(0,4)+"â€¢".repeat(a-8)+o.value.slice(a-4)});async function v(a){var n;const e=(n=a.target)==null?void 0:n.value;if(e)try{await y(e),r.value=!1}catch{r.value="Invalid API key."}}if(l.value){const a=D(async()=>{const{error:e}=await G(y(t.value||""));if(e){r.value="Invalid API key.";return}await x.deta.preferences.set.mutate({key:"api-key",value:t.value||""}),o.value=t.value||"",p.value=t.value||"",r.value=!1},300);B(t,(e,n)=>{e!==n&&a()})}return(a,e)=>{const n=k,m=I;return u(),c("div",O,[S,i("div",R,[d(" You can get your API key from the "),_(n,{to:"https://platform.openai.com/account/api-keys",target:"_blank"},{default:C(()=>[d(" OpenAI dashboard ")]),_:1}),d(". ")]),s(o)&&!s(l)?(u(),c("div",j,[F,M,s(l)?(u(),c("div",U,f(s(l)?"The API Key is setup and stored on Deta.":"This instance has a shared API key already set up."),1)):N("",!0),i("div",W,f(s(h)),1)])):(u(),c("div",$,[_(m,{modelValue:s(t),"onUpdate:modelValue":e[0]||(e[0]=g=>E(t)?t.value=g:null),placeholder:"Enter your API Key","text-11px":"","sm:text-4":"","w-full":"","text-gray-5":"","dark:text-gray-1":"",when:{blur:v},error:s(r)},null,8,["modelValue","when","error"])]))])}}});export{Z as default};
