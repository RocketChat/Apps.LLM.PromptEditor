import{_ as y}from"./input.vue.e5fd7f70.js";import{_ as x}from"./button.vue.f358e7a7.js";import{r as p,E as _,$ as S,a as k,q as v,b as f,e as m,u as w,z as C,V as E,w as T,k as b,i as V,A as N,o as h,l as R}from"./entry.381c0f38.js";import{u as A}from"./trpc.221bc22a.js";const I=decodeURIComponent,U=encodeURIComponent,L=/; */,d=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function B(e,i){if(typeof e!="string")throw new TypeError("argument str must be a string");let o={},t=i||{},s=e.split(L),a=t.decode||I;for(let n=0;n<s.length;n++){let r=s[n],l=r.indexOf("=");if(l<0)continue;let u=r.substr(0,l).trim(),c=r.substr(++l,r.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),o[u]==null&&(o[u]=O(c,a))}return o}function g(e,i,o){let t=o||{},s=t.encode||U;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!d.test(e))throw new TypeError("argument name is invalid");let a=s(i);if(a&&!d.test(a))throw new TypeError("argument val is invalid");let n=e+"="+a;if(t.maxAge!=null){let r=t.maxAge-0;if(isNaN(r)||!isFinite(r))throw new TypeError("option maxAge is invalid");n+="; Max-Age="+Math.floor(r)}if(t.domain){if(!d.test(t.domain))throw new TypeError("option domain is invalid");n+="; Domain="+t.domain}if(t.path){if(!d.test(t.path))throw new TypeError("option path is invalid");n+="; Path="+t.path}if(t.expires){if(typeof t.expires.toUTCString!="function")throw new TypeError("option expires is invalid");n+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(n+="; HttpOnly"),t.secure&&(n+="; Secure"),t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:n+="; SameSite=Strict";break;case"lax":n+="; SameSite=Lax";break;case"strict":n+="; SameSite=Strict";break;case"none":n+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n}function O(e,i){try{return i(e)}catch{return e}}const $={path:"/",watch:!0,decode:e=>S(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))};function z(e,i){var a;const o={...$,...i},t=D(o)||{},s=p(t[e]??((a=o.default)==null?void 0:a.call(o)));{const n=()=>{j(e,s.value,o)};o.watch?_(s,n,{deep:o.watch!=="shallow"}):n()}return s}function D(e={}){return B(document.cookie,e)}function K(e,i,o={}){return i==null?g(e,i,{...o,maxAge:-1}):g(e,i,o)}function j(e,i,o={}){document.cookie=K(e,i,o)}const q={flex:"~ col gap-2","items-center":"","justify-center":"","h-full":"","w-full":"","text-color":""},G=V("div",{"mb-4":""}," This instance is protected by a password. ",-1),M={key:0},Q=k({__name:"password",setup(e){const i=p(""),o=p(!1),{isLoggedIn:t}=v(),s=A();async function a(){await s.auth.login.mutate(i.value)?(o.value=!1,z("golem-password").value=i.value,t.value=!0,N("/")):o.value=!0}return(n,r)=>{const l=y,u=x;return h(),f("div",q,[G,m(l,{modelValue:w(i),"onUpdate:modelValue":r[0]||(r[0]=c=>C(i)?i.value=c:null),type:"password",placeholder:"Password",class:"min-w-48 max-w-64","text-color":"",onKeydown:E(a,["enter"])},null,8,["modelValue","onKeydown"]),m(u,{class:"min-w-48 max-w-64",onClick:a},{default:T(()=>[R(" Login ")]),_:1}),w(o)?(h(),f("div",M," Invalid password ")):b("",!0)])}}});export{Q as default};
